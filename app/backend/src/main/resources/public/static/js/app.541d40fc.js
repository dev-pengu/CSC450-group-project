(function(e){function t(t){for(var n,c,s=t[0],u=t[1],i=t[2],p=0,d=[];p<s.length;p++)c=s[p],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,i||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var u=r[s];0!==a[u]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},o=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var l=u;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"11b3":function(e,t,r){},"16e6":function(e,t,r){},"2d86":function(e,t,r){"use strict";r("11b3")},"30fd":function(e,t,r){"use strict";r("16e6")},"3ce1":function(e,t,r){"use strict";r("643c")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a={key:0},o={id:"nav"},c=Object(n["g"])("Home"),s=Object(n["g"])(" | "),u={key:1};function i(e,t){var r=Object(n["w"])("router-link"),i=Object(n["w"])("router-view");return Object(n["q"])(),Object(n["d"])("div",null,[this.$store&&this.$store.getters.isLoggedIn?(Object(n["q"])(),Object(n["d"])("div",a,[Object(n["e"])("div",o,[Object(n["h"])(r,{to:"/"},{default:Object(n["C"])((function(){return[c]})),_:1}),s]),Object(n["h"])(i)])):(Object(n["q"])(),Object(n["d"])("div",u,[Object(n["h"])(i)]))])}r("3ce1");var l=r("6b0d"),p=r.n(l);const d={},f=p()(d,[["render",i]]);var b=f,m=(r("d3b7"),r("6c02")),v=(r("d9e2"),r("caad"),r("2532"),r("5502")),g=r("bc3a"),h=r.n(g),j=(r("99af"),r("ac1f"),r("1276"),function(e,t,r){var n=new Date(r),a="expires=".concat(n.toUTCString());document.cookie="".concat(e,"=").concat(t,";").concat(a,";path=/")}),O=function(e){for(var t="".concat(e,"="),r=decodeURIComponent(document.cookie),n=r.split(";"),a=0;a<n.length;a++){var o=n[a];while(" "===o.charAt(0))o=o.substring(1);if(0===o.indexOf(e))return o.substring(t.length,o.length)}return""},w=h.a.create({baseURL:"/api/services",timeout:1e3,headers:{"Content-Type":"application/json",Accept:"application/json"}}),k={login:function(e,t){return w.post("/auth/login",{username:e,password:t},{validateStatus:function(e){return e<500}})},getDashboardData:function(){return w.get("/dashboard",{headers:{Authorization:"Bearer ".concat(O("Authorization"))}})},createUser:function(e,t,r,n,a){return w.post("/auth",{username:e,firstName:r,lastName:n,email:t,password:a})}},y=Object(v["a"])({state:{loggedIn:!1,loginError:!1,username:null},mutations:{login_success:function(e,t){e.loggedIn=!0,e.username=t.username},login_error:function(e,t){e.loginError=!0,e.username=t.username},logout_success:function(e){e.loggedIn=!1,e.username=null}},actions:{login:function(e,t){var r=e.commit,n=t.username,a=t.password;return new Promise((function(e,t){k.login(n,a).then((function(t){200===t.status&&r("login_success",{username:n}),e(t)})).catch((function(e){r("login_error",{username:n}),t(new Error("Invalid credentials!"))}))}))},signUp:function(e,t){e.commit;var r=t.username,n=t.email,a=t.firstName,o=t.lastName,c=t.password;return new Promise((function(e,t){k.createUser(r,n,a,o,c).then((function(t){e(t)})).catch((function(e){e.message.includes("409")&&t(new Error("Username or email already in use")),t(new Error("Couldn't create user."))}))}))},logout:function(e){var t=e.commit;t("logout_success")}},getters:{isLoggedIn:function(e){return e.loggedIn},hasLoginErrored:function(e){return e.loginError},getUsername:function(e){return e.username}}}),_=r("cf05"),x=r.n(_),U={class:"home"},E=Object(n["e"])("img",{alt:"Vue logo",src:x.a},null,-1);function P(e,t,r,a,o,c){var s=Object(n["w"])("HelloWorld");return Object(n["q"])(),Object(n["d"])("div",U,[E,Object(n["h"])(s,{msg:"Welcome to Your Vue.js App"})])}var A={class:"hello"},N=Object(n["f"])('<p data-v-66f08c36> For a guide and recipes on how to configure / customize this project,<br data-v-66f08c36> check out the <a href="https://cli.vuejs.org" target="_blank" rel="noopener" data-v-66f08c36>vue-cli documentation</a>. </p><h3 data-v-66f08c36>Installed CLI Plugins</h3><ul data-v-66f08c36><li data-v-66f08c36><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel" target="_blank" rel="noopener" data-v-66f08c36>babel</a></li><li data-v-66f08c36><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-router" target="_blank" rel="noopener" data-v-66f08c36>router</a></li><li data-v-66f08c36><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint" target="_blank" rel="noopener" data-v-66f08c36>eslint</a></li><li data-v-66f08c36><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-unit-jest" target="_blank" rel="noopener" data-v-66f08c36>unit-jest</a></li><li data-v-66f08c36><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-e2e-cypress" target="_blank" rel="noopener" data-v-66f08c36>e2e-cypress</a></li></ul><h3 data-v-66f08c36>Essential Links</h3><ul data-v-66f08c36><li data-v-66f08c36><a href="https://vuejs.org" target="_blank" rel="noopener" data-v-66f08c36>Core Docs</a></li><li data-v-66f08c36><a href="https://forum.vuejs.org" target="_blank" rel="noopener" data-v-66f08c36>Forum</a></li><li data-v-66f08c36><a href="https://chat.vuejs.org" target="_blank" rel="noopener" data-v-66f08c36>Community Chat</a></li><li data-v-66f08c36><a href="https://twitter.com/vuejs" target="_blank" rel="noopener" data-v-66f08c36>Twitter</a></li><li data-v-66f08c36><a href="https://news.vuejs.org" target="_blank" rel="noopener" data-v-66f08c36>News</a></li></ul><h3 data-v-66f08c36>Ecosystem</h3><ul data-v-66f08c36><li data-v-66f08c36><a href="https://router.vuejs.org" target="_blank" rel="noopener" data-v-66f08c36>vue-router</a></li><li data-v-66f08c36><a href="https://vuex.vuejs.org" target="_blank" rel="noopener" data-v-66f08c36>vuex</a></li><li data-v-66f08c36><a href="https://github.com/vuejs/vue-devtools#vue-devtools" target="_blank" rel="noopener" data-v-66f08c36>vue-devtools</a></li><li data-v-66f08c36><a href="https://vue-loader.vuejs.org" target="_blank" rel="noopener" data-v-66f08c36>vue-loader</a></li><li data-v-66f08c36><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener" data-v-66f08c36>awesome-vue</a></li></ul>',7);function C(e,t,r,a,o,c){return Object(n["q"])(),Object(n["d"])("div",A,[Object(n["e"])("h1",null,Object(n["y"])(r.msg),1),N])}var S={name:"HelloWorld",props:{msg:String}};r("71a1");const D=p()(S,[["render",C],["__scopeId","data-v-66f08c36"]]);var L=D,I={name:"Home",components:{HelloWorld:L}};const q=p()(I,[["render",P]]);var V=q,$=(r("a15b"),{class:"login"}),H=Object(n["e"])("img",{alt:"Logo",src:x.a},null,-1),R=Object(n["g"])("Dont have an account? "),z=Object(n["g"])("Sign up!"),M=Object(n["e"])("button",{type:"submit"},"Login",-1),T=["textContent"];function W(e,t,r,a,o,c){var s=Object(n["w"])("router-link");return Object(n["q"])(),Object(n["d"])("div",$,[H,Object(n["e"])("form",{onSubmit:t[2]||(t[2]=Object(n["E"])((function(t){return e.login()}),["prevent"]))},[Object(n["e"])("p",null,[R,Object(n["h"])(s,{to:"/signup"},{default:Object(n["C"])((function(){return[z]})),_:1})]),Object(n["D"])(Object(n["e"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.username=t}),placeholder:"Username"},null,512),[[n["A"],e.username]]),Object(n["D"])(Object(n["e"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.password=t}),type:"password",placeholder:"Password"},null,512),[[n["A"],e.password]]),M,e.error?(Object(n["q"])(),Object(n["d"])("p",{key:0,class:"error",textContent:Object(n["y"])(e.errors.join("<br/>"))},null,8,T)):Object(n["c"])("",!0)],32)])}var F=r("1da1"),J=(r("96cf"),Object(n["i"])({name:"Login",data:function(){return{loginError:!1,username:"",password:"",error:!1,errors:[]}},methods:{login:function(){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.errors=[],t.prev=1,t.next=4,e.$store.dispatch("login",{username:e.username,password:e.password});case 4:r=t.sent,200===r.status?(n=r.data,j("Authorization",n.token,n.expires),e.$router.push("/")):(e.loginError=!0,e.errors.push("Error with credentials"),e.error=!0),t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](1),e.loginError=!0,e.errors.push(t.t0),e.error=!0;case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}}));r("30fd");const B=p()(J,[["render",W]]);var Y=B,G={class:"signup"},K=Object(n["e"])("img",{alt:"Logo",src:x.a},null,-1),Q=Object(n["e"])("button",{type:"submit"},"Sign Up",-1),X=["textContent"];function Z(e,t,r,a,o,c){return Object(n["q"])(),Object(n["d"])("div",G,[K,Object(n["e"])("form",{onSubmit:t[6]||(t[6]=Object(n["E"])((function(t){return e.signUp()}),["prevent"]))},[Object(n["D"])(Object(n["e"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.username=t}),placeholder:"Username"},null,512),[[n["A"],e.username]]),Object(n["D"])(Object(n["e"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.email=t}),placeholder:"Email",type:"email"},null,512),[[n["A"],e.email]]),Object(n["D"])(Object(n["e"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.firstName=t}),placeholder:"First Name"},null,512),[[n["A"],e.firstName]]),Object(n["D"])(Object(n["e"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.lastName=t}),placeholder:"Last Name"},null,512),[[n["A"],e.lastName]]),Object(n["D"])(Object(n["e"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.password=t}),type:"password",placeholder:"Password"},null,512),[[n["A"],e.password]]),Object(n["D"])(Object(n["e"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.confirmPassword=t}),type:"password",placeholder:"Confirm Password"},null,512),[[n["A"],e.confirmPassword]]),Q,e.error?(Object(n["q"])(),Object(n["d"])("p",{key:0,class:"error",textContent:Object(n["y"])(e.errors.join("<br/>"))},null,8,X)):Object(n["c"])("",!0)],32)])}var ee=Object(n["i"])({name:"Sign Up",data:function(){return{username:"",password:"",confirmPassword:"",email:"",firstName:"",lastName:"",error:!1,errors:[]}},methods:{signUp:function(){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.errors=[],e.password===e.confirmPassword){t.next=5;break}return e.errors.push("Passwords do not match"),e.error=!0,t.abrupt("return");case 5:return t.prev=5,t.next=8,e.$store.dispatch("signUp",{username:e.username,password:e.password,email:e.email,firstName:e.firstName,lastName:e.lastName});case 8:if(r=t.sent,201!==r.status){t.next=16;break}return t.next=12,e.$store.dispatch("login",{username:e.username,password:e.password});case 12:n=t.sent,200===n.status?(a=r.data,j("Authorization",a.token,a.expires),e.$router.push("/")):e.$router.push("/login"),t.next=18;break;case 16:e.errors.push("Error creating user."),e.error=!0;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](5),e.errors.push(t.t0),e.error=!0;case 24:case"end":return t.stop()}}),t,null,[[5,20]])})))()}}});r("2d86");const te=p()(ee,[["render",Z]]);var re=te,ne=[{path:"/",name:"Home",component:V,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:Y},{path:"/signup",name:"Sign Up",component:re},{path:"/:pathMatch(.*)*",redirect:"/"}],ae=Object(m["a"])({history:Object(m["b"])("/"),routes:ne});ae.beforeEach((function(e,t,r){e.matched.some((function(e){return e.meta.requiresAuth}))?y.getters.isLoggedIn?r():(console.log("im not logged in"),r({path:"/login"})):r()}));var oe=ae;Object(n["b"])(b).use(oe).use(y).mount("#app")},"643c":function(e,t,r){},"71a1":function(e,t,r){"use strict";r("c02c")},c02c:function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"static/img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.541d40fc.js.map